<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <title>SupLang Playground</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Syne:wght@400;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./css/index.css" />
  </head>
  <body>
    <div id="app">
      <header id="header">
        <h1 id="title">
          <span class="accent">Sup</span>Lang<span class="dot">.</span>
        </h1>
        <button class="funlang-btn">
          <a href="./examples.html">Examples</a>
        </button>
        <div id="toggle-wrap">
          <span id="toggle-label">Light</span>
          <button
            id="theme-toggle"
            aria-label="Toggle theme"
            onclick="toggleTheme()"
          ></button>
        </div>
      </header>

      <div id="editor-card">
        <div id="editor-toolbar">
          <div class="dot-row">
            <span class="d1"></span>
            <span class="d2"></span>
            <span class="d3"></span>
          </div>
          <span id="editor-lang-tag">suplang</span>
        </div>
        <textarea id="code" spellcheck="false">flex "Hello Mohit"</textarea>
      </div>

      <button id="run-btn" onclick="run()">â–¶ &nbsp;Run</button>

      <div id="output-card">
        <div id="output-header">
          <span id="output-label">Output</span>
          <span id="output-indicator"></span>
        </div>
        <pre id="output"></pre>
      </div>

      <footer id="footer">
        SupLang Playground &mdash; write, run, explore
      </footer>
    </div>

    <script type="module">
      import { runSupLang } from "./run.js";

      window.run = function () {
        const code = document.getElementById("code").value;
        const result = runSupLang(code);
        const outputEl = document.getElementById("output");

        if (result.success) {
          outputEl.textContent = result.output;
          outputEl.style.color = "green";
        } else {
          outputEl.textContent = result.error;
          outputEl.style.color = "red";
        }
      };
    </script>

    <script>
      function toggleTheme() {
        const html = document.documentElement;
        const btn = document.getElementById("theme-toggle");
        const label = document.getElementById("toggle-label");
        const isLight = html.getAttribute("data-theme") === "light";
        html.setAttribute("data-theme", isLight ? "dark" : "light");
        btn.classList.toggle("light", !isLight);
        label.textContent = isLight ? "Light" : "Dark";
      }
    </script>
  </body>
</html>